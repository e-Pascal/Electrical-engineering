# Часть 4. Схема формирования питания для МК, ПЛИС и ОУ

## Содержание

[Введение](#введение)  
[Теоретическая база. ПИТАНИЕ](#теоретическая-база-питание)  
   - [Питание микроконтроллеров](#питание-микроконтроллеров)  
   - [Питание ПЛИС](#питание-плис)  
   - [Особенности питания операционных усилителей](#особенности-питания-операционных-усилителей)

[Теоретическая база. ТАКТИРОВАНИЕ](#теоретическая-база-тактирование)  
   - [Генераторы и резонаторы](#генераторы-и-резонаторы)  
   - [Тактирование микроконтроллеров](#тактирование-микроконтроллеров)  
   - [Тактирование ПЛИС](#тактирование-плис)

[Теоретическая база. ИНТЕРФЕЙСЫ](#теоретическая-база-интерфейсы)  
   - [Общая информация об интерфейсах](#общая-информация-об-интерфейсах)  
   - [Интерфейсы программирования и отладки](#интерфейсы-программирования-и-отладки)  
   - [Интерфейсы передачи/обмена пользовательскими данными](#интерфейсы-передачиобмена-пользовательскими-данными)

[Теоретическая база. СЛУЖЕБНЫЕ ВЫВОДЫ](#теоретическая-база-служебные-выводы)  
- [Режимы загрузки МК](#режимы-загрузки-мк)  
- [Режимы загрузки ПЛИС](#режимы-загрузки-плис)  
- [Сброс](#сброс)

[Задание](#задание)  

---

## Введение

В четвёртой части курсовой работы рассматривается разработка схемы питания на основе вторичных источников питания (ВИП) для микроконтроллера (МК), программируемой логической интегральной схемы (ПЛИС) и операционного усилителя (ОУ). Особое внимание в данной части уделено выбору стабилизаторов, расчётам их параметров и особенностям фильтрации.

---

## Теоретическая база. ПИТАНИЕ

### Питание микроконтроллеров

Питание МК — это важнейший аспект проектирования схем, от которого зависит стабильность работы как самого устройства, так и всей системы. Современные микроконтроллеры требуют формирования разного уровня напряжений для питания ядра, периферийных модулей и аналоговых цепей.

---

#### Особенности 

Система питания МК как правило включает в себя следующие выводы:
- VDD: внешнее питание для части блока ввода-вывода, внутреннего регулятора и аналоговых систем, таких как сброс, управление питанием и внутреннее тактирование;
- VDDA: внешнее аналоговое питание для АЦП, ЦАП, операционных усилителей, компараторов и источника опорного напряжения. Питание VDDA независимо от VDD;
- VREF: используется для установки точного уровня опорного напряжения. 
- VBAT: питает часы реального времени RTC, внешний генератор 32 кГц и регистры восстановления, когда отсутствует основное питание.

<p align="center" > <img src="./pic/p1.png"></p>

<p align="center" >Рисунок 4.1 – Система питания в МК</p>

Рассмотрим пример МК от разных производителей, такие как STM32, ESP32 или PIC, которые имеют следующие особенности:

- **Ядро процессора**:
  Работает на низком напряжении ($V_\\text{CORE}$) от $1,1 \\ \\text{В}$ до $1,8 \\ \\text{В}$, что снижает энергопотребление и увеличивает производительность.
  
- **Периферийные интерфейсы**:
  GPIO, UART, SPI и другие интерфейсы питаются от напряжения ($V_\\text{IO}$), обычно $3,3 \\ \\text{В}$ или $5 \\ \\text{В}$.

- **Аналоговые модули**:
  АЦП и ЦАП требуют стабильного опорного напряжения ($V_\\text{REF}$), чтобы обеспечить точные измерения.

- **Резервный домен**:
  RTC и энергонезависимая память питаются от ($V_\\text{BAT}$), часто это $1,8 \\ \\text{В}$ или литиевая батарея на $3,0 \\ \\text{В}$.

---

#### Практические примеры

##### STM32H7
- $V_\\text{CORE} = 1,2 \\ \\text{В}$, $I_\\text{CORE} = 0,5 \\ \\text{А}$.
- $V_\\text{IO} = 3,3 \\ \\text{В}$, $I_\\text{IO} = 0,3 \\ \\text{А}$.
- $V_\\text{REF} = 3,3 \\ \\text{В}$ для аналоговых модулей.

##### ESP32
- Основное питание: $3,3 \\ \\text{В}$, ток до $0,5 \\ \\text{А}$.
- Уровни интерфейсов согласуются через преобразователи напряжений для периферии на $5,0 \\ \\text{В}$.

##### PIC18F45K22
- Одинаковый уровень напряжения питания $5,0 \\ \\text{В}$ для ядра и периферии.
- Минимальное потребление $20 \\ \\text{мА}$ в режиме сна.

---

#### Пример выбора микросхем ВИП и расчёты

##### Исходные данные:
- $V_\\text{CORE} = 1,2 \\ \\text{В}, I_\\text{CORE} = 0,5 \\ \\text{А}$.
- $V_\\text{IO} = 3,3 \\ \\text{В}, I_\\text{IO} = 0,3 \\ \\text{А}$.
- $V_\\text{IN} = 5,0 \\ \\text{В}$.

---

##### Выбор микросхем

###### Для $V_\\text{CORE}$:
- Импульсный стабилизатор **Texas Instruments TPS62097**:
  - Выходное напряжение: $1,2 \\ \\text{В}$.
  - Максимальный выходной ток: $1,0 \\ \\text{А}$.
  - КПД: $\\approx 90\\%$ при указанных параметрах.

###### Для $V_\\text{IO}$:
- Линейный стабилизатор **Analog Devices LT1963**:
  - Выходное напряжение: $3,3 \\ \\text{В}$.
  - Низкий уровень шумов: $<40 \\ \\mu\\text{В}$.

---

##### Расчёты

###### Для $V_\\text{CORE}$ с импульсным стабилизатором:
1. Выходная мощность:
   $$P_\\text{OUT} = V_\\text{OUT} \\cdot I_\\text{OUT} = 1,2 \\cdot 0,5 = 0,6 \\ \\text{Вт}.$$
2. Входная мощность:
   $$P_\\text{IN} = \\frac{P_\\text{OUT}}{\\eta} = \\frac{0,6}{0,9} = 0,667 \\ \\text{Вт}.$$
3. Входной ток:
   $$I_\\text{IN} = \\frac{P_\\text{IN}}{V_\\text{IN}} = \\frac{0.667}{5,0} = 0.133 \\ \\text{А}.$$

###### Для $V_\\text{IO}$ с линейным стабилизатором:
1. Тепловыделение:
   $$P_\\text{DISS} = (V_\\text{IN} - V_\\text{OUT}) \\cdot I_\\text{OUT} = (5,0 - 3,3) \\cdot 0,3 = 0,51 \\ \\text{Вт}.$$
2. Выходная мощность:
   $$P_\\text{OUT} = V_\\text{OUT} \\cdot I_\\text{OUT} = 3,3 \\cdot 0,3 = 0,99 \\ \\text{Вт}.$$

---

##### Итоговые параметры системы
- Общая входная мощность:
  $$P_\\text{IN (общ)} = P_\\text{IN (CORE)} + P_\\text{DISS (IO)} + P_\\text{OUT (IO)} = 0,667 + 0,51 + 0,99 = 2.167 \\ \\text{Вт}.$$

---


### Питание ПЛИС

Программируемые логические интегральные схемы (ПЛИС) обладают высокой производительностью и требуют сложной системы питания. Основные особенности включают множество уровней напряжений, высокое энергопотребление, а также строгие требования к фильтрации помех. 

ПЛИС, как правило, имеют довольно сложные требования к питанию, включая несколько линий питания (часто при разных напряжениях), жесткие допуски напряжения, последовательность включения питания и плавный запуск. 

Требования к системе питания ПЛИС: 
1. Ограничить параметры переходного процесса при включении питания.
2. Максимально снизить уровень высокочастотного шума, неизбежного в цифровых высокоскоростных схемах. Для этого необходимы:
    - раздельные шины питания для различных основных потребителей тока;
    - установка достаточного количества фильтрующих конденсаторов.

Если эти требования не выполняются, то работа может быть ненадежной или ПЛИС может быть повреждена.

Структурная схема системы питания ПЛИС состоит из первичного источника питания, формирующего входное напряжение (Vin) для стабилизатора напряжения, схемы, устанавливающей последовательность подачи различных напряжений и по необходимости схемы слежения за уровнями напряжений (супервизор). Одним из ключевых компонентов системы питания является цепочка фильтрующих конденсаторов вокруг ПЛИС. Они позволяют распределить рабочий ток между потребителями, используя низкоимпедансные пути прохождения тока, тем самым снижая уровень высокочастотного шума. 

Все ПЛИС нуждаются в источнике напряжения питания ядра, но большинство сложных ПЛИС испытывают потребность и в отдельном источнике напряжения питания для блоков ввода-вывода, источнике опорных напряжений, источнике напряжения для дополнительных функций. Зачастую, для корректного формирования последовательсти подачи питания на ПЛИС используют супервизоры питания(не обязательный атрибут, но значительно повышающий качество формирования уровней). В некоторых ПЛИС важна последовательность подачи питания, для чего можно использовать супервизоры или включать стабилизаторы напряжения с задержкой(задержку подачи логического уровня можно формировать обычным RC фильтром). 
  
<p align="center" > <img src="./pic/p2.png"></p>

<p align="center" >Рисунок 4.2 – Пример использования супервизора для питания ПЛИС</p>

Для питания разных функциональных блоков ПЛИС используются различные уровни напряжения. Для обеспечения одного уровня напряжения необходим один вторичный источник питания. 

Рассмотрим более подробно основные типы напряжения питания, необходимые для ПЛИС:
- VCCINT. Внешнее напряжение питания ядра. Является основным питающим напряжением ПЛИС и, как правило, обеспечивает большую часть мощности, затрачиваемой в ПЛИС. Основное напряжение источника зависит от семейства ПЛИС. Напряжение питания ядра может использоваться и для питания конфигурационного перепрограммируемого постоянного запоминающего устройства. Для современных ПЛИС это напряжение обычно находится в диапазоне от 0,9 В до 1,2 В с допуском 5%.
- VCCO. Напряжение питания блоков ввода-вывода. Уровни напряжения определяются внешними цифровыми схемами и, поскольку многие современные ПЛИС имеют несколько портов ввода-вывода, каждый из них может питаться от своего источника для обеспечения интерфейса с различными типами цифровой логики. 
- VCCAUX. Вспомогательное напряжение питания, необходимое для различных вспомогательных функций ПЛИС, например для устройства управления тактовой частотой или интерфейсом JTAG. Вспомогательные устройства более чувствительны к шуму, нежели другие, и поэтому VCCAUX имеет более высокие требования по развязке для минимизации наведенного шума. В случае если источник питания ядра напряжением VCCO обладает низким шумом, от него можно запитать блоки вспомогательных функций
 
<p align="center" > <img src="./pic/p3.png"></p>

<p align="center" >Рисунок 4.3 – Пример подключения ПЛИС</p>



---

#### 1. Особенности питания ПЛИС

Современные ПЛИС, такие как **Xilinx Artix-7** или **Intel Cyclone V**, требуют раздельного питания для различных блоков. Основные уровни питания данной микросхемы включают:

1. **Питание ядра ($V_\\text{CORE}$)**:
   - Обеспечивает работу основной логики ядра.
   - Типичное напряжение: $0,9 \\, \\text{В} - 1,2 \\, \\text{В}$.
   - Ток потребления может достигать нескольких ампер в зависимости от активности логики.

2. **Питание интерфейсов ($V_\\text{IO}$)**:
   - Для работы GPIO и интерфейсов ввода-вывода (I²C, SPI, UART).
   - Обычно $3,3 \\, \\text{В}$ или $2,5 \\, \\text{В}$, чтобы соответствовать внешним устройствам.

3. **Питание вспомогательных блоков ($V_\\text{AUX}$)**:
   - Используется для тактовых генераторов, конфигурационной памяти и дополнительных модулей.
   - Типичное напряжение: $1,8 \\, \\text{В}$.

4. **Опорное напряжение ($V_\\text{REF}$)**:
   - Для работы аналоговых блоков и прецизионных схем.
   - Требует минимального уровня шумов, типичное значение — $1,25 \\, \\text{В} - 2,5 \\, \\text{В}$.

---

#### 2. Практические примеры

##### Пример 1: Xilinx Artix-7
Для ПЛИС **Artix-7** используются следующие уровни напряжений:
1. $V_\\text{CORE} = 1,0 \\, \\text{В}$, потребляемый ток $2 \\, \\text{А}$ при высокой загрузке логики.
2. $V_\\text{IO} = 3,3 \\, \\text{В}$, потребляемый ток $0,5 \\, \\text{А}$.
3. $V_\\text{AUX} = 1,8 \\, \\text{В}$, потребляемый ток $0,1 \\, \\text{А}$.

##### Пример 2: Intel Cyclone V
1. $V_\\text{CORE} = 1.1 \\, \\text{В}$, ток $1.8 \\, \\text{А}$.
2. $V_\\text{IO} = 2.5 \\, \\text{В}$, ток $0.3 \\, \\text{А}$.
3. $V_\\text{REF} = 1.25 \\, \\text{В}$ для опорных сигналов АЦП и ЦАП.

---

#### 3. Пример выбора микросхем ВИП и расчёты

##### Исходные данные:
Для ПЛИС Artix-7:
- $V_\\text{CORE} = 1,0 \\, \\text{В}, I_\\text{CORE} = 2,0 \\, \\text{А}$.
- $V_\\text{IO} = 3,3 \\, \\text{В}, I_\\text{IO} = 0,5 \\, \\text{А}$.
- $V_\\text{AUX} = 1,8 \\, \\text{В}, I_\\text{AUX} = 0,1 \\, \\text{А}$.

##### Выбор микросхем:
1. **Для $V_\\text{CORE}$:**
   - Импульсный стабилизатор **Texas Instruments LM21215A**:
     - Выходное напряжение: $1,0 \\, \\text{В}$.
     - Максимальный ток: $15 \\, \\text{А}$.
     - КПД: $92\\%$ при нагрузке $2,0 \\, \\text{А}$.

2. **Для $V_\\text{IO}$:**
   - Линейный стабилизатор **Analog Devices LT1963**:
     - Выходное напряжение: $3,3 \\, \\text{В}$.
     - Максимальный ток: $1,5 \\, \\text{А}$.
     - Низкий уровень шумов.

3. **Для $V_\\text{AUX}$:**
   - Импульсный стабилизатор **Texas Instruments TPS62933**:
     - Выходное напряжение: $1,8 \\, \\text{В}$.
     - Максимальный ток: $3,0 \\, \\text{А}$.
     - КПД: $94\\%$.

##### Расчёты:
1. **Для $V_\\text{CORE}$:**
   - Выходная мощность:
     $$P_\\text{OUT} = V_\\text{OUT} \\cdot I_\\text{OUT} = 1,0 \\cdot 2,0 = 2,0 \\, \\text{Вт}.$$
   - Входная мощность:
     $$P_\\text{IN} = \\frac{P_\\text{OUT}}{\\eta} = \\frac{2,0}{0,92} \\approx 2,17 \\, \\text{Вт}.$$

2. **Для $V_\\text{IO}$:**
   - Тепловыделение:
     $$P_\\text{DISS} = (V_\\text{IN} - V_\\text{OUT}) \\cdot I_\\text{OUT} = (5,0 - 3,3) \\cdot 0,5 = 0,85 \\, \\text{Вт}.$$

---



### Особенности питания операционных усилителей

Операционные усилители (ОУ) являются важной частью многих аналоговых и смешанных схем. Правильная организация питания этих компонентов влияет на их стабильность, точность и уровень шумов. В отличие от цифровых устройств, ОУ чувствительны к колебаниям напряжения питания, что делает критически важным выбор стабилизаторов и фильтров.

---

#### Питание ОУ: основные аспекты

Большинство операционных усилителей требуют двухполярного питания, то есть наличие положительного ($V_+$) и отрицательного ($V_-$) напряжений относительно общего провода ($GND$). Это позволяет корректно обрабатывать как положительные, так и отрицательные входные сигналы, что необходимо для многих схем обработки сигналов. Типичные уровни питания для аналоговых ОУ составляют:
- $V_+ = +15 \\, \\text{В}$, $V_- = -15 \\, \\text{В}$ — для прецизионных аналоговых схем.
- $V_+ = +5 \\, \\text{В}$, $V_- = -5 \\, \\text{В}$ — для низковольтных приложений.

Например, ОУ, такие как **LM358**, могут работать в однополярных схемах ($V_+ = 5 \\, \\text{В}, V_- = 0 \\, \\text{В}$), но это ограничивает диапазон обрабатываемых сигналов.

---

#### Влияние питания на параметры ОУ

Параметры операционных усилителей зависят от стабильности и уровня напряжений питания. Например:
- **Напряжение смещения** ($V_\\text{offset}$): нестабильное питание может привести к дрейфу смещения, что особенно критично для схем измерений.
- **Уровень шумов** ($V_\\text{noise}$): высокочастотные помехи в линии питания усиливаются схемой, ухудшая сигнал.
- **Полоса пропускания** ($BW$): недостаточное питание может ограничить верхнюю границу частотного диапазона.

Для минимизации влияния питания на работу ОУ применяются фильтрующие элементы, такие как LC-фильтры и байпасные конденсаторы.

---

#### Практический пример: питание LM358

Операционный усилитель **LM358** часто используется в низковольтных и экономичных схемах. Его питание может быть организовано как двухполярным ($\\pm 15 \\, \\text{В}$), так и однополярным ($0 - 5 \\, \\text{В}$).

1. **Двухполярное питание**:
   - Стабилизаторы: используют линейные стабилизаторы **LM7815** ($+15 \\, \\text{В}$) и **LM7915** ($-15 \\, \\text{В}$).
   - Фильтрация: конденсаторы $0,1 \\, \\mu\\text{Ф}$ размещаются на входе и выходе стабилизаторов для подавления высокочастотных помех.

2. **Однополярное питание**:
   - Источник: линейный стабилизатор **LM7805** для $+5 \\, \\text{В}$.
   - Ограничения: максимальный выходной сигнал ограничен диапазоном $0 - 5 \\, \\text{В}$.

---

#### Согласование питания ОУ с другими компонентами

В многокомпонентных схемах операционные усилители часто взаимодействуют с МК или ПЛИС. При этом важно обеспечить изоляцию питания аналоговых и цифровых компонентов. Например:
- Для питания ОУ может использоваться отдельный стабилизатор с низким уровнем шумов, такой как **Analog Devices LT3042**.
- Аналоговые цепи требуют выделенной земли, которая соединяется с цифровой землёй в одной точке (рядом со стабилизатором).

---

#### Итоги по питанию

1. **Обеспечьте стабильность напряжений**:
   - Используйте качественные стабилизаторы, подходящие для нагрузки (линейные для минимальных шумов, импульсные для высоких токов).
   - Проверяйте стабильность напряжений для всех уровней питания.

2. **Разделяйте аналоговые и цифровые цепи**:
   - Используйте изолированные источники питания для чувствительных компонентов, таких как ОУ или аналоговые модули.
   - Соединяйте земли аналоговых и цифровых цепей в одной точке (через "мостик").

3. **Планируйте многоуровневое питание**:
   - Для МК: обеспечьте отдельное питание для ядра, периферии и аналоговых модулей.
   - Для ПЛИС: организуйте питание для ядра, интерфейсов, вспомогательных блоков и опорного напряжения.
   - Для ОУ: при необходимости используйте двухполярное питание.

4. **Уделите внимание фильтрации помех**:
   - Размещайте байпасные конденсаторы ($0,1 \\, \\mu\\text{Ф}$) максимально близко к выводам питания каждого компонента.
   - Используйте дополнительные ёмкости ($10 \\, \\mu\\text{Ф}$) для снижения низкочастотных шумов.

5. **Продумайте топологию печатной платы**:
   - Делайте линии питания короткими и широкими, особенно для цепей с высокими токами (например, ядро ПЛИС).
   - Уменьшайте индуктивность и сопротивление дорожек.

6. **Обеспечьте защиту цепей питания**:
   - Устанавливайте диоды Шоттки для защиты от обратного тока.
   - Используйте TVS-диоды для предотвращения повреждений при всплесках напряжения.

7. **Учитывайте взаимодействие компонентов**:
   - Питание МК, ПЛИС и ОУ должно быть согласовано по уровням напряжений.
   - Если возможны помехи, устанавливайте фильтры между источниками питания и потребителями.

---

## Теоретическая база. ТАКТИРОВАНИЕ

Система тактирования является основным функциональным блоком, синхронизирующим все процессы и определяющим скорость их выполнения.

### Генераторы и резонаторы

#### Генераторы

Генераторы — это устройства, которые создают периодические сигналы для синхронизации работы различных компонентов в микросхемах. Генераторы могут быть как внутренними, так и внешними.

- **Внутренние генераторы** — встроены в микроконтроллер или ПЛИС и не требуют внешних компонентов. Они обычно основаны на RC-генераторах. Эти генераторы могут быть не такими точными, так как их частота зависит от температуры и других факторов.
  
  **Преимущества:** простота, отсутствие внешних компонентов.  
  **Недостатки:** низкая точность, зависимость от температуры и внешних факторов.

- **Внешние генераторы** — обычно кварцевые или микромеханические. Они обеспечивают высокую стабильность и точность частоты, часто используемые в системах с высокими требованиями.

  **Преимущества:** высокая точность и стабильность, широкая настройка частоты.  
  **Недостатки:** требуют отдельного источника питания, занимают больше места на плате.

**Отличие от резонаторов:** Генераторы требуют питания для работы и могут обеспечивать активное генерирование частоты, в то время как резонаторы (например, кварцевые или керамические) не нуждаются в источнике питания и используют пассивные свойства материалов для создания стабильной частоты.

#### Резонаторы

Резонаторы — это устройства, использующие физические свойства материалов (кварца или керамики) для создания стабильных частотных колебаний. Резонаторы сами не генерируют сигнал, а лишь стабилизируют частоту, поэтому они не требуют питания, в отличие от генераторов.

- **Кварцевые резонаторы** — используют пьезоэлектрические свойства кварцевых кристаллов для генерации высокоточных колебаний.

  **Преимущества:** высокая точность (тысячные доли процента), высокая стабильность.  
  **Недостатки:** хрупкость, требуют дополнительных компонентов (например, конденсаторов).

- **Керамические резонаторы** — используют керамические материалы для создания колебаний. Они менее точные, чем кварцевые, но более устойчивы к внешним воздействиям.

  **Преимущества:** прочность, некоторые модели имеют встроенные конденсаторы, упрощая подключение.  
  **Недостатки:** меньшая точность (десятые доли процента).

**Отличие от генераторов:** Резонаторы не требуют питания и обеспечивают более низкую точность и стабильность по сравнению с генераторами.

### Тактирование микроконтроллеров

Микроконтроллеры могут быть тактированы с использованием различных источников частоты, в зависимости от требований к точности и стабильности.

- **Внутренний генератор (RC-генератор):** подходит для приложений с невысокими требованиями к точности.
  
  **Преимущества:** низкая стоимость, простота.  
  **Недостатки:** низкая точность, зависимость от температуры.

- **Внешний кварцевый резонатор:** предоставляет высокую точность и стабильность частоты.

  **Преимущества:** высокая точность, стабильность.  
  **Недостатки:** требуют дополнительных компонентов (конденсаторы), чувствительны к механическим повреждениям.

  <p align="center" > <img src="./pic/p4.png"></p>

  <p align="center" >Рисунок 4.4 - Подключение внешнего резонатора </p>

- **Внешний генератор:** обеспечивает точность и стабильность частоты с высокой точностью.

  **Преимущества:** высокая точность и стабильность.  
  **Недостатки:** требуют отдельного источника питания, увеличивает размер системы.

  <p align="center" > <img src="./pic/p5.png"></p>

  <p align="center" >Рисунок 4.5 - Подключение внешнего генератора </p>

- **RC-цепочка:** дешёвый и простой способ получения тактовой частоты, но с наименьшей точностью.

  **Преимущества:** низкая стоимость.  
  **Недостатки:** низкая точность частоты, погрешности до десятков процентов.

  <p align="center" > <img src="./pic/p6.png"></p>

  <p align="center" >Рисунок 4.6 - Подключение RC-цепочки </p>

### Тактирование ПЛИС

Для ПЛИС чаще всего используются внешние генераторы с высокой стабильностью частоты. Обычно это кварцевые или микромеханические генераторы.

- **Кварцевые или микромеханические генераторы:** обеспечивают точную и стабильную частоту.

  **Преимущества:** высокая точность и стабильность.  
  **Недостатки:** требуют отдельного источника питания и больше места на плате.

- **Буферные схемы для генераторов:** применяются для минимизации искажений сигнала и повышения надёжности работы ПЛИС.

  **Преимущества:** защита от искажений, повышение надёжности.  
  **Недостатки:** увеличение сложности схемы и стоимости.

 
## Теоретическая база. ИНТЕРФЕЙСЫ

### Общая информация об интерфейсах

Интерфейс — это совокупность механических, электрических и программных средств, с помощью которых компоненты системы взаимодействуют для обмена информацией.

Интерфейсы можно классифицировать по нескольким признакам, например:

#### **По назначению:**
- **Интерфейсы программирования и отладки** — предназначены для записи прошивок, тестирования и отладки работы микросхем. Например, JTAG, SWD, SWIM.
- **Интерфейсы передачи данных** — используются для обмена данными между устройствами, такими как UART, SPI, I2C, CAN, USB, PCI и PCIe.

#### **По синхронности:**
- **Синхронные интерфейсы** — обмен данными происходит с использованием тактового сигнала. Например, SPI, I2C, CAN.
- **Асинхронные интерфейсы** — данные передаются без использования тактового сигнала. Пример: UART, USB.

#### **По параллельности:**
- **Последовательные интерфейсы** — данные передаются по одной линии последовательно. Например, UART, SPI, I2C, USB.
- **Параллельные интерфейсы** — данные передаются по нескольким линиям одновременно. Пример: PCI, PCIe.
###

---

Выводы МК и ПЛИС могут быть сконфигурированы программным путём в зависимости от назначения и используемого интерфейса. В случае ПЛИС три варианта: in (вход), out (выход), inout (двунаправленный порт). В случае с МК существуют больше вариантов.

**Режимы пользовательских выводов микроконтроллера**

Каждый пользовательский вывод микроконтроллера (МК) может использоваться в одном из следующих режимов:

- **Input floating** — вход без подтягивающего резистора, брошенный в воздухе вход.
- **Input pull-up** — вход с подтягивающим резистором, подключенным к питанию.
- **Input pull-down** — вход с подтягивающим резистором, подключенным к общему проводу (земле).
- **Analog** — аналоговый вход (вход АЦП, компараторов и т.п.).
- **Output open-drain** — выход с открытым стоком. Функционально аналогичен выходу с открытым коллектором. При низком логическом уровне замыкает вывод на землю, при высоком — бросает в воздухе.
- **Output push-pull** — обычный активный выход. При низком логическом уровне напряжение на выводе равно 0, при высоком — напряжение близко к напряжению питания.


---

### Интерфейсы программирования и отладки

Для того чтобы микроконтроллер или ПЛИС могли выполнять задачи, необходимо записать в память устройства прошивку. Для этого используется **программатор**, который подключается через интерфейсы, такие как COM или USB порты, к выводам микросхемы.

#### **JTAG (Joint Test Action Group)**

##### Определение
**JTAG** (Joint Test Action Group) — стандарт для тестирования и отладки цифровых устройств, таких как микроконтроллеры и ПЛИС, через последовательный интерфейс.

##### История появления
JTAG был разработан в 1985 году для тестирования соединений на печатных платах и позже стал использоваться для программирования и отладки микроконтроллеров и ПЛИС.

##### Характеристика
- **Тип:** Последовательный интерфейс.
- **Синхронный:** Да, работает с тактовым сигналом.
- **Напряжение:** 3.3 В или 5 В.
- **Скорость передачи:** От нескольких Мбит/с до десятков Мбит/с.

##### Необходимые линии интерфейса
- **TCK (Test Clock)** — тактовый сигнал.
- **TDI (Test Data In)** — входные тестовые данные.
- **TDO (Test Data Out)** — выходные тестовые данные.
- **TMS (Test Mode Select)** — выбор режима.
- **TRST (Test Reset)** — сброс JTAG (не всегда используется).

##### Принцип работы
JTAG используется для доступа к внутренним регистраторам устройства, тестирования соединений, программирования и отладки.

##### Режимы работы
- **Тестирование соединений** (Boundary Scan).
- **Программирование микроконтроллеров и ПЛИС**.
- **Отладка**.

##### Область применения
- **Когда использовать:** Для тестирования и отладки сложных систем.
- **Когда не использовать:** Для простых систем, где JTAG избыточен.

##### Ссылка на стандарт
- **IEEE 1149.1-2013** — Standard for Test Access Port and Boundary-Scan Architecture.  
  [IEEE 1149.1-2013 на IEEE Xplore](https://ieeexplore.ieee.org/document/6548334)

---

#### **SWD (Serial Wire Debug)**

##### Определение
**SWD** (Serial Wire Debug) — это интерфейс для отладки, разработанный архитектурой ARM.

##### История появления
SWD был разработан как облегчённая версия интерфейса JTAG для упрощения отладки микроконтроллеров с минимальным количеством линий.

##### Характеристика
- **Тип:** Последовательный интерфейс.
- **Синхронный:** Да, с тактовым сигналом.
- **Напряжение:** 3.3 В.
- **Скорость передачи:** Обычно до 10 Мбит/с.

##### Необходимые линии интерфейса
- **SWDIO (Serial Wire Data In/Out)** — двусторонняя линия для передачи данных.
- **SWCLK (Serial Wire Clock)** — тактовый сигнал.

##### Принцип работы
SWD использует только две линии, что делает его более компактным по сравнению с JTAG. Он позволяет отлаживать программы и получать доступ к внутренним регистраторам устройства.

##### Режимы работы
- **Отладка** — для программной отладки и диагностики.
  
##### Область применения
- **Когда использовать:** Когда необходима компактность и экономия проводов (например, в устройствах ARM).
- **Когда не использовать:** Для устройств, не поддерживающих SWD.

---

#### **SWIM (Single Wire Interface Module)**

##### Расшифровка
**SWIM** — интерфейс для программирования и отладки, разработанный компанией STMicroelectronics для микроконтроллеров STM8.

##### История появления
SWIM был разработан для упрощения интерфейса с 8-битными микроконтроллерами STM8 и использования только одной линии для передачи данных.

##### Характеристика
- **Тип:** Последовательный интерфейс.
- **Синхронный:** Да.
- **Напряжение:** 3.3 В или 5 В.
- **Скорость передачи:** До 1 Мбит/с.

##### Необходимые линии интерфейса
- **SWIM** — единственная линия для передачи и получения данных.

##### Принцип работы
SWIM использует одну линию для передачи данных, что упрощает подключение к микроконтроллеру STM8.

##### Режимы работы
- **Программирование** — запись прошивки в микроконтроллер.
- **Отладка** — мониторинг работы программы.

##### Область применения
- **Когда использовать:** Для микроконтроллеров STM8, когда важна минимизация линий.
- **Когда не использовать:** Для других типов микроконтроллеров.

---

### Интерфейсы передачи/обмена пользовательскими данными


#### **UART (Universal Asynchronous Receiver-Transmitter)**

##### Определение
**UART** — это последовательный интерфейс для асинхронной передачи данных.

##### История появления
UART был создан для обмена данными между устройствами, такими как компьютеры и периферийные устройства, без необходимости в тактовом сигнале.

##### Характеристика
- **Тип:** Последовательный интерфейс.
- **Синхронный/асинхронный:** Асинхронный.
- **Напряжение:** 3.3 В или 5 В.
- **Скорость передачи:** От 9600 до 115200 бит/с и выше.

##### Необходимые линии интерфейса
- **TX** — линия передачи данных.
- **RX** — линия приема данных.

##### Принцип работы
UART — это асинхронный последовательный интерфейс, который передает данные без использования тактового сигнала. Он использует две линии: TX (передача данных) и RX (прием данных), где данные передаются побитно. В отличие от синхронных интерфейсов, UART работает без общего тактового сигнала, а синхронизация происходит с помощью стартового и стопового битов. Для успешной передачи и приема данных устройства должны работать с одинаковыми параметрами, такими как скорость передачи и количество бит в кадре. UART широко используется для обмена данными между микроконтроллерами и внешними устройствами.

##### Режимы работы
- **Полудуплекс** — передача данных поочередно.
- **Полнодуплекс** — одновременная передача и прием.

##### Область применения
- **Когда использовать:** Для простых и эффективных коммуникаций между устройствами.
- **Когда не использовать:** Когда необходима высокая скорость передачи данных.

##### Связанная ссылка

Официальной спецификации от ISO для UART нет. Однако подробное описание UART можно найти в документации производителей.

- **UART** — Описание UART.  
  [Diodes Incorporated UART Products](https://www.diodes.com/products/connectivity/interface/uart/)
---

#### **SPI (Serial Peripheral Interface)**

##### Определение
**SPI** — это последовательный периферийный интерфейс для обмена данными между устройствами.

##### История появления
SPI был разработан компанией Motorola и широко используется для обмена данными между микроконтроллером и периферийными устройствами.

##### Характеристика
- **Тип:** Последовательный интерфейс.
- **Синхронный:** Да.
- **Напряжение:** 3.3 В или 5 В.
- **Скорость передачи:** Высокая (до десятков Мбит/с).

##### Необходимые линии интерфейса
- **MOSI** — линия передачи данных от ведущего устройства.
- **MISO** — линия передачи данных от подчиненного устройства.
- **SCK** — тактовый сигнал.
- **SS** — выбор подчиненного устройства.

##### Принцип работы
SPI — это синхронный последовательный интерфейс, который использует четыре основные линии: MOSI (Master Out Slave In), MISO (Master In Slave Out), SCK (тактовый сигнал) и SS (выбор подчиненного устройства). В SPI данные передаются побитно, и синхронизация осуществляется с помощью тактового сигнала, который генерирует ведущий (master) устройства. Каждое подчиненное устройство на шине имеет свою линию выбора (SS), что позволяет обмениваться данными с несколькими периферийными устройствами. SPI является высокоскоростным интерфейсом, который обеспечивает быстрый обмен данными между микроконтроллером и периферийными устройствами. Он работает в полнодуплексном режиме, позволяя одновременно передавать и принимать данные.

##### Режимы работы
- **Основной режим** — обмен данными с периферийными устройствами.

##### Область применения
- **Когда использовать:** Для быстрого обмена данными с периферийными устройствами.
- **Когда не использовать:** Когда необходимо подключить больше одного устройства без дополнительной логики.

##### Связанная ссылка

Официальной спецификации от ISO для SPI нет. Однако подробное описание UART можно найти в документации производителей.

- **SPI** — Описание SPI.  
  [Diodes Incorporated SPI Products](https://www.diodes.com/protocols/i2c/)

---

#### **I2C (Inter-Integrated Circuit)**

##### Определение
**I2C** — последовательный интерфейс для связи интегральных схем внутри электронных устройств.

##### История появления
I2C был разработан компанией Philips в 1980-х годах как интерфейс для связи микросхем на одной печатной плате.

##### Характеристика
- **Тип:** Последовательный интерфейс.
- **Синхронный:** Да.
- **Напряжение:** 3.3 В или 5 В.
- **Скорость передачи:** 100 кбит/с — 3.4 Мбит/с.

##### Необходимые линии интерфейса
- **SDA** — линия передачи данных.
- **SCL** — тактовая линия.

##### Принцип работы
В I2C существует один ведущий (master) и несколько подчиненных (slave) устройств, и ведущий инициирует обмен данными, контролируя тактовый сигнал. Каждое устройство на шине имеет уникальный адрес, который используется для идентификации при передаче данных. Данные передаются побитно по линии SDA, а синхронизация осуществляется через тактовую линию SCL, что делает интерфейс синхронным. I2C поддерживает арбитраж, который позволяет нескольким ведущим устройствам конкурировать за право управления шиной, предотвращая конфликты при одновременных запросах.

##### Режимы работы
- **Мастера** и **подчиненные** устройства.
- **Арбитраж** — для предотвращения конфликтов между ведущими устройствами.

##### Область применения
- **Когда использовать:** Для связи множества устройств на одной шине.
- **Когда не использовать:** Когда требуется высокая скорость передачи данных.

##### Связанная ссылка

- **I2C (Inter-Integrated Circuit)** — Официальная спецификация I2C.
  [I2C Standard на NXP](https://www.nxp.com/docs/en/user-guide/UM10204.pdf)
  
---

#### **CAN (Controller Area Network)**

##### Определение
**CAN** — это последовательный интерфейс для связи между интеллектуальными устройствами, датчиками и исполнительными механизмами.

##### История появления
CAN был разработан в 1980-х годах для автомобильной электроники и применяется для обмена данными между узлами на высокоскоростных шинах.

##### Характеристика
- **Тип:** Последовательный интерфейс.
- **Синхронный:** Да.
- **Напряжение:** 3.3 В или 5 В.
- **Скорость передачи:** 1 Мбит/с.

##### Необходимые линии интерфейса
- **CAN_H** и **CAN_L** — дифференциальные линии передачи.

##### Принцип работы
CAN — это дифференциальный последовательный интерфейс, предназначенный для связи между микроконтроллерами и периферийными устройствами в системах с несколькими узлами, например, в автомобилях. Он использует две линии передачи: CAN_H (высокий уровень) и CAN_L (низкий уровень), что обеспечивает высокую помехоустойчивость и надежность связи. CAN использует механизм арбитража, при котором устройства с меньшим идентификатором сообщения получают приоритет в передаче данных. Шина CAN позволяет нескольким устройствам обмениваться данными, но только одно устройство может передавать данные в любой момент времени. Скорость передачи данных в CAN может достигать 1 Мбит/с.

##### Режимы работы
- **Арбитраж** — сообщение с наименьшим идентификатором имеет приоритет.

##### Область применения
- **Когда использовать:** В системах с несколькими устройствами, где важна высокая помехоустойчивость.
- **Когда не использовать:** Когда простота и низкая стоимость важнее.

##### Связанная ссылка

- **ISO 11898-1:2015** — Road vehicles — Controller area network (CAN) — Part 1: Data link layer and physical signalling.  
  [ISO 11898-1:2015 на ISO.org](https://www.iso.org/standard/63648.html)


---

#### **USB (Universal Serial Bus)**

##### Определение
**USB** — это универсальный последовательный интерфейс, предназначенный для подключения различных периферийных устройств к компьютеру.

##### История появления
USB был разработан в 1994 году с целью упростить подключение внешних устройств к компьютерам и заменить устаревшие параллельные и последовательные порты.

##### Характеристика
- **Тип:** Последовательный интерфейс.
- **Синхронный/асинхронный:** Асинхронный.
- **Напряжение:** 5 В (типичное), поддерживает также 3.3 В для некоторых устройств.
- **Скорость передачи:** От 12 Мбит/с (USB 1.1) до 40 Гбит/с (USB 4.0).

##### \Необходимые линии интерфейса
- **D+** и **D-** — линии передачи данных.
- **Vcc** — питание.
- **GND** — земля.
- **USB Power/Charging Line** — линия для зарядки устройств.

##### Принцип работы
USB — это асинхронный последовательный интерфейс, предназначенный для подключения различных периферийных устройств к компьютерам и другим устройствам. Он использует четыре линии: VBUS (питание), D+ и D- (передача данных) и GND (земля). USB позволяет обмениваться данными между устройствами на высокой скорости, а также передавать питание через одну шину. Он поддерживает разные режимы работы, включая работу с устройствами в режиме хоста и устройства. В USB существует несколько версий (USB 1.0, 2.0, 3.0, 4.0), каждая из которых поддерживает различные скорости передачи данных, достигая до 40 Гбит/с в последней версии.

##### Режимы работы
- **Host-to-Device** (ведущий к устройству).
- **Device-to-Host** (устройство к ведущему).
- **Peer-to-Peer** (между устройствами).

##### Область применения
- **Когда использовать:** Для подключения различных устройств (клавиатур, мышей, принтеров, внешних накопителей и т. д.) к компьютеру.
- **Когда не использовать:** Когда требуется высокая пропускная способность при низкой задержке (например, для специфических серверных приложений).

##### Связанная ссылка

Последняя версия стандарта — USB4, которая была утверждена в 2019 году и обеспечивает скорость передачи данных до 40 Гбит/с.

- **USB4 Specification** — Официальная спецификация USB4.  
  [USB4 Specification на USB-IF](https://www.usb.org/document-library/usb4r-specification-v20)

---

#### **PCI (Peripheral Component Interconnect)**

##### Определение
**PCI** — это стандарт для подключения периферийных устройств к компьютеру с помощью параллельной шины.

##### История появления
PCI был разработан в 1990-х годах компанией Intel как решение для обмена данными между компьютером и периферийными устройствами, такими как сетевые карты, видеокарты, звуковые карты и т.д.

##### Характеристика
- **Тип:** Параллельный интерфейс.
- **Синхронный/асинхронный:** Синхронный.
- **Напряжение:** 3.3 В или 5 В (в зависимости от устройства).
- **Скорость передачи:** 33 Мбит/с до 133 Мбит/с (в зависимости от версии).

##### Необходимые линии интерфейса
- **Data Lines** — несколько линий для передачи данных.
- **Address Lines** — линии для передачи адресной информации.
- **Control Lines** — линии для управления передачей данных.

##### Принцип работы
PCI — это параллельный интерфейс, который используется для подключения периферийных устройств, таких как видеокарты, звуковые карты и другие компоненты, к центральному процессору в компьютере. Он использует несколько линий передачи данных, адреса и управления для обмена информацией между устройствами и процессором. PCI позволяет устройствам обмениваться данными с высокой пропускной способностью и предоставляет многоканальную связь для различных периферийных устройств. Интерфейс PCI работает на тактовом сигнале и поддерживает несколько устройств на одной шине. PCI также поддерживает различные конфигурации и возможность обмена данными между устройствами.

##### Режимы работы
- **Master-to-Slave** — главный контроллер управляет передачей данных.
- **Slave-to-Master** — периферийное устройство может инициировать передачу.

##### Область применения
- **Когда использовать:** В компьютерных системах для подключения таких устройств, как видеокарты, звуковые карты, сетевые карты и т.д.
- **Когда не использовать:** В современных системах, где используется более быстрые интерфейсы, такие как PCI-Express.

##### Связанная ссылка

Последняя версия стандарта — PCI 3.0, утвержденная в 2011 году.

- **PCI Local Bus Specification Revision 3.0** — Официальные спецификации по PCI и PCIe.  
  [PCI Local Bus Specification на PCI-SIG](https://pcisig.com/specifications/pciexpress)

---

#### **PCI-Express (PCIe)**

##### Определение
**PCI-Express** (PCIe) — это современный высокоскоростной интерфейс для подключения периферийных устройств в компьютере, использующий сериальную передачу данных.

##### История появления
PCIe был представлен в 2003 году как улучшенная версия PCI, обеспечивающая более высокую скорость передачи данных и поддержку более эффективной архитектуры.

##### Характеристика
- **Тип:** Последовательный интерфейс.
- **Синхронный:** Да, с использованием тактового сигнала.
- **Напряжение:** 3.3 В.
- **Скорость передачи:** От 2.5 Гбит/с до 64 Гбит/с (в зависимости от версии и количества линий).

##### Необходимые линии интерфейса
- **Transmit Lines** — линии передачи данных.
- **Receive Lines** — линии приема данных.
- **Ground Line** — линия заземления.

##### Принцип работы
PCI-Express (PCIe) — это последовательный интерфейс нового поколения, предназначенный для подключения высокоскоростных периферийных устройств к компьютеру. В отличие от PCI, PCIe использует серию последовательных линий для передачи данных, что позволяет значительно повысить скорость обмена данными. Каждый канал PCIe работает в полном дуплексе, что позволяет одновременно передавать и принимать данные. PCIe поддерживает различные конфигурации с использованием множества линий, например, x1, x4, x8, x16, что позволяет регулировать скорость передачи в зависимости от количества используемых линий. PCIe используется для подключения графических карт, SSD-накопителей и других высокоскоростных устройств и поддерживает скорости до 64 Гбит/с в последней версии 5.0.

##### Режимы работы
- **x1, x4, x8, x16, x32** — количество линий, используемых для передачи данных.
- **Full-duplex** — двусторонняя передача данных на каждой линии.

##### Область применения
- **Когда использовать:** Для подключения высокоскоростных устройств, таких как графические карты, SSD, сетевые карты и т.д.
- **Когда не использовать:** Для простых устройств, которым не требуется высокая пропускная способность.

##### Связанная ссылка

Последняя версия стандарта — PCI Express 6.0, утвержденная в 2022 году, обеспечивает скорость передачи данных до 64 Гбит/с.

- **PCI Express Base Specification Revision 6.0** — Официальные спецификации по PCI и PCIe.  
  [PCI Express Base Specification на PCI-SIG](https://pcisig.com/specifications/pciexpress)

---

## Теоретическая база. СЛУЖЕБНЫЕ ВЫВОДЫ

### Режимы загрузки МК

Микроконтроллер может начать свою работу в одном из трех различных режимов загрузки. Эти режимы выбираются с помощью выводов **BOOT0** и **BOOT1**. От выбранного режима загрузки зависит, какую область карты памяти микроконтроллер будет считать началом памяти. Микроконтроллер может исполнять код программы из **Flash памяти**, **внутреннего статического ОЗУ** или **системной памяти**.

Для работы в обычном режиме вывод **BOOT0** необходимо соединить с **GND**. Если же планируется использование других режимов, необходимо предусмотреть джамперы для задания различных состояний на выводах управления загрузкой.

**Режимы загрузки STM32:**

1.  **Внутренняя Flash-память:** Микроконтроллер загружается из основной Flash-памяти, где хранится основная программа.
2.  **Системная память:** Микроконтроллер использует встроенный загрузчик для программирования через интерфейсы, такие как USART, USB или SPI.
3.  **Встроенная SRAM:** Микроконтроллер загружается из внутренней SRAM, что обычно используется для отладки или специальных целей.

**Таблица состояний выводов BOOT0 и BOOT1:**

| **BOOT0** | **BOOT1** | **Режим загрузки**            |
|-----------|-----------|-------------------------------|
| 0         | 0         | Внутренняя Flash-память       |
| 0         | 1         | Встроенная SRAM               |
| 1         | 0         | Системная память              |
| 1         | 1         | Резервный режим               |

**Примечание:** В некоторых моделях STM32 вывод **BOOT1** может быть недоступен, и его состояние задается с помощью опциональных битов (option bytes).

**Рекомендации по подключению:**

- **BOOT0:** Рекомендуется подключить к **GND** через резистор 10 кОм, чтобы обеспечить нормальную работу устройства.
- **BOOT1:** Если вывод доступен, его состояние можно контролировать с помощью джамперов или резисторов для выбора желаемого режима загрузки.

Для получения более подробной информации рекомендуется ознакомиться с официальной документацией STM32, такой как [AN2606: STM32 микроконтроллеры — Режимы загрузки из системной памяти](https://www.st.com/resource/en/application_note/cd00167594-stm32-microcontroller-system-memory-boot-mode-stmicroelectronics.pdf).

Правильная настройка выводов **BOOT0** и **BOOT1** критична для корректной работы микроконтроллера и успешного программирования устройства.

<p align="center"><img src="./pic/p26.png"></p>

<p align="center">Рисунок 4.7 – Управляющие сигналы для выбора режима загрузки</p>

---

### Режимы загрузки ПЛИС

ПЛИС также имеет специальные выводы, которые задают режим загрузки. В зависимости от состояния этих выводов выбирается нужный режим конфигурации. Рассмотрим, как это происходит на примере **Xilinx** и **Intel (Altera)** ПЛИС.

#### Для Xilinx FPGA:
1. **Многорежимный переключатель M[2:0]:**
   Эти три пина определяют режим загрузки FPGA Xilinx:
   - **M[2:0] = 001**: Master SPI (конфигурация из внешней SPI FLASH).
   - **M[2:0] = 101**: Slave SPI (приём данных по SPI).
   - **M[2:0] = 110**: JTAG (конфигурация через JTAG).

#### Для Intel (Altera) FPGA:
1. **MSEL (Configuration Mode Select):**
   Пины **MSEL[3:0]** на микросхеме Intel FPGA задают режим загрузки:
   - Активный последовательный (Active serial (AS)).
   - Активный параллельный (Active parallel (AP)).
   - Пассивный последовательный (Passive serial (PS)).
   - Быстрый пассивный параллельный (Fast passive parallel (FPP)).
   - JTAG.

---

### Сброс

Начальный сброс требуется любому МК и ПЛИС для корректной инициализации системы. Он организуется через выводы **NRST** (активный НИЗКИЙ уровень) или **RST** (активный ВЫСОКИЙ уровень). В большинстве популярных моделей используется вывод **NRST**. Это позволяет гарантировать, что микроконтроллер не начнёт работу до того, как схема питания полностью стабилизируется и устройства на плате получат питание.

При запуске устройства обычно используется внешний **схемы сброса**, которая активируется при подаче питания. На начальном этапе схема сброса будет удерживать вывод **NRST** в низком состоянии, что гарантирует, что микроконтроллер не начнёт выполнять код до завершения стабилизации питания. По мере зарядки конденсатора через резистор, вывод **NRST** будет переходить в высокий уровень, что сигнализирует микроконтроллеру, что он может начать выполнение кода.

Существует несколько схем сброса, наиболее распространённая включает в себя:

- **Конденсатор** для задержки (обычно 100 нФ), который подключается между выводом **NRST** и землёй. Он удерживает низкий уровень на выводе **NRST** при запуске, пока схема не стабилизируется.
- **Резистор** (обычно 10-100 кОм), который зарядит конденсатор после подачи питания, а затем приведет вывод **NRST** в высокий уровень, разрешая запуск микроконтроллера.

Обычно в таких схемах также используется кнопка сброса, которая при нажатии разряжает конденсатор и инициирует новый сброс микроконтроллера.

Задержку перед запуском можно рассчитать по классической формуле для RC.

Эта задержка необходима для того, чтобы МК не запускался до того, как все устройства на плате не получат питание и не перейдут в стабилизированный режим работы.

## Задание

Разработать схему Э3 на базе МК и ПЛИС.
1. Выбрать из предложенного по варианту семейства микросхему МК и ПЛИС (для КР можно выбрать корпус с минимальным количеством выводов)
2. Выбрать любой датчик с предложенным по варианту интерфейсом
3. Выбрать любой дисплей с предложенным по варианту интерфейсом
4. Выбрать линейные и импульсные стабилизаторы для организации питания
5. Разработать схему Э3:
   - тактирование МК от внешнего резонатора
   - тактирование ПЛИС от внешнего генератора
   - наличие схемы сброса, фильтрации питания, схемы режима загрузки
   - подключение датчика и дисплея к соответствующим выводам МК, дополнительно по одной кнопке, светодиоду и движковому переключателю (свитчу)
   - к ПЛИС подключить ЛЮБОЙ ДАТЧИК и ЛЮБОЙ ДИСПЛЕЙ, 1 кнопку, 1 светодиод, 1 свитч
   - подключить 3 цепи между выводами МК и ПЛИС

Варианты
| Номер варианта | Семейство МК    | Семейство ПЛИС  | Интерфейс датчика | Интерфейс дисплея |
|----------------|-----------------|-----------------|-------------------|-------------------|
| 1              | STM32F0         | Xilinx Spartan-6 | I2C               | SPI               |
| 2              | PIC16           | Lattice iCE40   | UART              | I2C               |
| 3              | STM32L0         | Altera Cyclone IV | SPI               | UART              |
| 4              | PIC18           | Intel MAX10     | I2C               | SPI               |
| 5              | STM32F1         | Xilinx Artix-7  | UART              | I2C               |
| 6              | PIC16           | Lattice iCE40   | SPI               | UART              |
| 7              | STM32F3         | Xilinx Spartan-3 | I2C               | SPI               |
| 8              | PIC18           | Altera MAX V    | UART              | I2C               |
| 9              | STM32F0         | Xilinx Spartan-6 | SPI               | UART              |
| 10             | STM32F1         | Xilinx Artix-7  | I2C               | SPI               |
| 11             | PIC16           | Altera Cyclone IV | UART             | SPI               |
| 12             | STM32F1         | Lattice iCE40   | SPI               | I2C               |
| 13             | PIC18           | Intel MAX10     | I2C               | UART              |
| 14             | STM32F0         | Xilinx Spartan-6 | UART              | SPI               |
| 15             | STM32F1         | Xilinx Artix-7  | SPI               | I2C               |
| 16             | PIC16           | Altera MAX V    | I2C               | UART              |
| 17             | STM32F3         | Xilinx Spartan-3 | UART              | SPI               |
| 18             | PIC18           | Lattice iCE40   | SPI               | I2C               |
| 19             | STM32F103C8T6   | Xilinx Spartan-6 | I2C               | UART              |
| 20             | STM32L0         | Xilinx Artix-7  | UART              | SPI               |
| 21             | PIC16           | Altera Cyclone IV | SPI             | UART              |
| 22             | STM32F3         | Xilinx Spartan-3 | I2C               | I2C               |
| 23             | PIC18           | Altera MAX V    | UART              | SPI               |
| 24             | STM32L0         | Xilinx Spartan-6 | SPI               | I2C               |
| 25             | STM32F1         | Lattice iCE40   | UART              | SPI               |
| 26             | PIC16           | Xilinx Artix-7  | SPI               | I2C               |
| 27             | STM32F0         | Altera Cyclone IV | I2C              | UART              |
| 28             | STM32F103C8T6   | Xilinx Spartan-6 | UART              | SPI               |
| 29             | PIC18           | Altera MAX V    | SPI               | I2C               |
| 30             | STM32L031G6U6   | Xilinx Spartan-6 | I2C               | UART              |
